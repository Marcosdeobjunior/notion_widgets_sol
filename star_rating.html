<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>Widget de Estrelas</title>
  <style>
    .star-rating {
      display: inline-flex;
      direction: rtl;
      font-size: 2rem;
      cursor: pointer;
    }

    .star-rating span {
      color: #ccc;
      transition: color 0.2s;
    }

    .star-rating span.hovered,
    .star-rating span.selected {
      color: gold;
    }
  </style>
</head>
<body>

  <!-- Mude apenas o valor de data-stars (1 a 5) -->
  <div class="star-widget" data-stars="3"></div>

  <script>
    document.querySelectorAll('.star-widget').forEach(widget => {
      let totalStars = parseInt(widget.getAttribute('data-stars')) || 5;
      if (totalStars > 5) totalStars = 5;
      if (totalStars < 1) totalStars = 1;

      const container = document.createElement('div');
      container.classList.add('star-rating');

      let selectedRating = 0;

      for (let i = totalStars; i >= 1; i--) {
        const star = document.createElement('span');
        star.innerHTML = 'â˜…';
        star.dataset.value = i;

        // Hover effect
        star.addEventListener('mouseover', () => {
          container.querySelectorAll('span').forEach(s => {
            s.classList.toggle('hovered', s.dataset.value <= i);
          });
        });

        // Clear hover
        container.addEventListener('mouseleave', () => {
          container.querySelectorAll('span').forEach(s => {
            s.classList.remove('hovered');
          });
        });

        // Click to select
        star.addEventListener('click', () => {
          selectedRating = i;
          container.querySelectorAll('span').forEach(s => {
            s.classList.toggle('selected', s.dataset.value <= i);
          });
          console.log(`Nota selecionada: ${selectedRating}`);
        });

        container.appendChild(star);
      }

      widget.appendChild(container);
    });
  </script>
</body>
</html>
